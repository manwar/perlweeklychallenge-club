sub f {
    pop()
    =~ s/\D//gr
    =~ s/\d{3}/$&-/gr
    =~ s/-$//gr
    =~ s/(\d)-(\d)$/-$1$2/gr
}

use Test::More tests => 5;
is f("1-23-45-6"), "123-456";
is f("1234"), "12-34";
is f("12 345-6789"), "123-456-789";
is f("123 4567"), "123-45-67";
is f("123 456-78"), "123-456-78";

