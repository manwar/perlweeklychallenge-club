# For up to date code:
# https://github.com/codereport/bqn-code/blob/main/pwc/334-2.bqn

u â‡ â€¢Import "/home/cph/bqn-test/test.bqn"

Dist â† +Â´|âˆ˜-
NearestValidPoint â† { xâ€¿yğ•Šp:
    v â† (yâ·âŠ¢Â´Â¨p)âˆ¨xâ·âŠ‘Â¨p # valid points
    { 0=+Â´v ? Â¯1 ; âŠ‘pâŠ(v/p)/ËœâŒŠÂ´âŠ¸=(xâˆ¾y)âŠ¸DistÂ¨v/p }
}

# Tests
u.UnitTest (3â€¿4 NearestValidPoint âŸ¨1â€¿2, 3â€¿1, 2â€¿4, 2â€¿3âŸ©) â‰¡ 2
u.UnitTest (2â€¿5 NearestValidPoint âŸ¨3â€¿4, 2â€¿3, 1â€¿5, 2â€¿5âŸ©) â‰¡ 3
u.UnitTest (1â€¿1 NearestValidPoint âŸ¨2â€¿2, 3â€¿3, 4â€¿4âŸ©)      â‰¡ Â¯1
u.UnitTest (0â€¿0 NearestValidPoint âŸ¨0â€¿1, 1â€¿0, 0â€¿2, 2â€¿0âŸ©) â‰¡ 0
