#!/usr/bin/env raku

use Prime::Factor;
use Test;

is-deeply Achilles[^100],
            (72,   108,   200,   288,   392,   432,   500,   648,   675,   800,
            864,   968,   972,  1125,  1152,  1323,  1352,  1372,  1568,  1800,
           1944,  2000,  2312,  2592,  2700,  2888,  3087,  3200,  3267,  3456,
           3528,  3872,  3888,  4000,  4232,  4500,  4563,  4608,  5000,  5292,
           5324,  5400,  5408,  5488,  6075,  6125,  6272,  6728,  6912,  7200,
           7688,  7803,  8575,  8712,  8748,  8788,  9000,  9248,  9747,  9800,
          10125, 10368, 10584, 10800, 10952, 10976, 11552, 11907, 11979, 12168,
          12348, 12500, 12800, 13068, 13448, 13500, 14112, 14283, 14792, 15125,
          15488, 15552, 16000, 16200, 16875, 16928, 17496, 17672, 18000, 18252,
          18432, 19208, 19652, 19773, 20000, 20808, 21125, 21168, 21296, 21600);

sub Achilles 
{ 
    sub Achilles(\n)
    {
        my \pf = prime-factors(n).List;
        my \powerful  = so n %% all pf.squish >>**>> 2; 
        my \imperfect = ([gcd] pf.Bag.values) == 1;
        powerful and imperfect
    }

    (2..*).hyper.grep(&Achilles)
}
